<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Official Schedule and Booking Calendar for NAU MPCT Labs. Reserve equipment, view maintenance windows, and sign up for training.">
    <meta name="theme-color" content="#002454">
    <title>Schedule | NAU MPCT Official Calendar</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&family=Source+Sans+3:ital,wght@0,300;0,400;0,600;0,700;0,800;1,400&display=swap" rel="stylesheet">

    <style>
        /* * ==========================================
         * CORE VARIABLES (Matched to Home)
         * ========================================== 
         */
        :root {
            --nau-blue: #002454;
            --nau-blue-dark: #001838;
            --nau-blue-light: #003a85;
            --nau-gold: #FAC01A;
            --nau-gold-dark: #dbb400;
            --nau-green: #007a33;
            --nau-red: #bb0000;
            --white: #ffffff;
            --gray-100: #f1f3f5;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-600: #6c757d;
            --gray-800: #343a40;
            --black: #000000;
            
            --font-display: 'Oswald', sans-serif;
            --font-body: 'Source Sans 3', sans-serif;
            
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font-body); background-color: var(--white); color: var(--nau-blue); line-height: 1.6; }
        
        /* Typography Utilities */
        h1, h2, h3 { font-family: var(--font-display); text-transform: uppercase; font-weight: 700; }
        .text-gold { color: var(--nau-gold); }
        .text-blue { color: var(--nau-blue); }
        .text-white { color: var(--white); }
        
        /* Layout Utilities */
        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
        .btn {
            display: inline-flex; align-items: center; justify-content: center;
            padding: 10px 20px; font-family: var(--font-display); font-weight: 700;
            text-transform: uppercase; border: 2px solid transparent; cursor: pointer;
            transition: 0.3s;
        }
        .btn-primary { background: var(--nau-gold); color: var(--nau-blue); border-color: var(--nau-gold); }
        .btn-primary:hover { background: var(--white); border-color: var(--nau-gold); }
        .btn-secondary { background: var(--nau-blue); color: var(--white); }
        .btn-secondary:hover { background: var(--nau-blue-light); }

        /* * ==========================================
         * HEADER (Mini Version)
         * ========================================== 
         */
        .site-header { background: var(--nau-blue); color: var(--white); padding: 15px 0; position: sticky; top: 0; z-index: 1000; box-shadow: var(--shadow-md); }
        .header-inner { display: flex; justify-content: space-between; align-items: center; }
        .brand { display: flex; align-items: center; gap: 15px; text-decoration: none; color: var(--white); }
        .brand img { height: 40px; }
        .brand-text { display: flex; flex-direction: column; line-height: 1; }
        .brand-text .main { font-family: var(--font-display); font-size: 1.5rem; font-weight: 700; }
        .brand-text .sub { font-size: 0.75rem; color: var(--nau-gold); letter-spacing: 0.05em; text-transform: uppercase; }
        .nav-links { display: flex; gap: 20px; }
        .nav-links a { color: var(--white); text-decoration: none; font-family: var(--font-display); font-weight: 600; text-transform: uppercase; font-size: 1rem; }
        .nav-links a:hover { color: var(--nau-gold); }
        .nav-links a.active { color: var(--nau-gold); border-bottom: 2px solid var(--nau-gold); }

        /* * ==========================================
         * CALENDAR HEADER & FILTERS
         * ========================================== 
         */
        .calendar-hero {
            background: linear-gradient(rgba(0,36,84,0.8), rgba(0,36,84,0.9)), url('https://images.unsplash.com/photo-1581093450021-4a7360e9a6b5?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            padding: 60px 0;
            color: var(--white);
            text-align: center;
        }

        .calendar-title { font-size: 3.5rem; margin-bottom: 10px; font-style: italic; text-shadow: 2px 2px 0 var(--black); }
        .calendar-subtitle { font-size: 1.2rem; max-width: 600px; margin: 0 auto; color: var(--gray-200); }

        .filter-bar {
            background: var(--gray-100);
            border-bottom: 1px solid var(--gray-300);
            padding: 15px 0;
            position: sticky;
            top: 74px; /* Height of header */
            z-index: 900;
        }

        .filter-container { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
        
        .filter-group { display: flex; gap: 10px; align-items: center; }
        .filter-label { font-weight: 700; text-transform: uppercase; font-size: 0.9rem; color: var(--gray-600); }
        
        .filter-btn {
            background: var(--white);
            border: 1px solid var(--gray-300);
            padding: 8px 16px;
            font-family: var(--font-display);
            text-transform: uppercase;
            font-weight: 600;
            cursor: pointer;
            border-radius: 4px;
            transition: 0.2s;
            color: var(--nau-blue);
        }

        .filter-btn:hover, .filter-btn.active { background: var(--nau-blue); color: var(--white); border-color: var(--nau-blue); }
        .filter-btn.active-gold { background: var(--nau-gold); color: var(--nau-blue); border-color: var(--nau-gold); }

        .view-toggle { display: flex; background: var(--gray-300); border-radius: 4px; padding: 2px; }
        .view-btn { padding: 6px 12px; border: none; background: transparent; cursor: pointer; font-weight: 600; border-radius: 2px; }
        .view-btn.active { background: var(--white); shadow: var(--shadow-sm); }

        /* * ==========================================
         * CALENDAR GRID VIEW
         * ========================================== 
         */
        .calendar-wrapper { padding: 40px 0; }
        
        .calendar-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .month-display { font-size: 2rem; font-family: var(--font-display); color: var(--nau-blue); font-weight: 700; }
        .nav-btn { background: none; border: 2px solid var(--nau-blue); width: 40px; height: 40px; border-radius: 50%; cursor: pointer; color: var(--nau-blue); font-size: 1.2rem; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .nav-btn:hover { background: var(--nau-blue); color: var(--white); }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            border: 1px solid var(--gray-300);
            background: var(--white);
        }

        .day-header {
            background: var(--nau-blue);
            color: var(--white);
            padding: 10px;
            text-align: center;
            font-family: var(--font-display);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .calendar-day {
            min-height: 140px;
            border-right: 1px solid var(--gray-200);
            border-bottom: 1px solid var(--gray-200);
            padding: 10px;
            position: relative;
            background: var(--white);
            transition: background 0.2s;
        }

        .calendar-day:hover { background: var(--gray-100); }
        .calendar-day.other-month { background: var(--gray-100); color: var(--gray-600); opacity: 0.6; }
        .calendar-day.today { background: rgba(250, 192, 26, 0.1); }
        .calendar-day.today .day-number { background: var(--nau-blue); color: var(--white); width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }

        .day-number { font-weight: 700; margin-bottom: 5px; font-size: 0.9rem; }

        .event-chip {
            display: block;
            padding: 4px 6px;
            margin-bottom: 4px;
            border-radius: 2px;
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--white);
            text-decoration: none;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            cursor: pointer;
            border-left: 3px solid rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        .event-chip:hover { transform: translateX(2px); }

        /* Event Types (Team Colors) */
        .type-training { background-color: var(--nau-green); }
        .type-maintenance { background-color: var(--nau-red); }
        .type-reservation { background-color: var(--nau-blue); }
        .type-lecture { background-color: var(--nau-gold); color: var(--nau-blue); }

        /* * ==========================================
         * LIST VIEW (Athletics Schedule Style)
         * ========================================== 
         */
        .schedule-list { display: none; margin-top: 20px; }
        .schedule-list.active { display: block; }

        .schedule-row {
            display: grid;
            grid-template-columns: 100px 1.5fr 1fr 150px;
            background: var(--white);
            border: 1px solid var(--gray-300);
            margin-bottom: 10px;
            align-items: center;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }

        .schedule-row:hover { border-color: var(--nau-gold); transform: translateX(5px); box-shadow: var(--shadow-md); }
        
        .schedule-date {
            background: var(--nau-blue);
            color: var(--white);
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            text-align: center;
        }
        
        .date-num { font-size: 1.8rem; font-family: var(--font-display); font-weight: 700; line-height: 1; }
        .date-month { font-size: 0.8rem; text-transform: uppercase; font-weight: 600; }

        .schedule-info { padding: 20px; }
        .event-cat { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--gray-600); font-weight: 700; margin-bottom: 4px; }
        .event-name { font-size: 1.2rem; font-family: var(--font-display); font-weight: 600; color: var(--nau-blue); margin-bottom: 4px; }
        .event-loc { display: flex; align-items: center; gap: 5px; font-size: 0.9rem; color: var(--gray-600); }
        
        .schedule-status { padding: 0 20px; font-weight: 700; text-transform: uppercase; font-size: 0.9rem; }
        .status-open { color: var(--nau-green); }
        .status-full { color: var(--nau-red); }
        .status-maintenance { color: var(--nau-gold-dark); }

        .schedule-action { padding: 20px; text-align: right; }

        /* * ==========================================
         * BOOKING MODAL (Ticket Office Style)
         * ========================================== 
         */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 36, 84, 0.85);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.open { display: flex; }

        .booking-modal {
            background: var(--white);
            width: 90%;
            max-width: 600px;
            border-top: 6px solid var(--nau-gold);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .modal-header {
            padding: 20px 30px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title { margin: 0; font-size: 1.5rem; color: var(--nau-blue); }
        .close-modal { background: none; border: none; font-size: 2rem; color: var(--gray-600); cursor: pointer; line-height: 1; }

        .modal-body { padding: 30px; }
        
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-weight: 700; margin-bottom: 8px; color: var(--nau-blue); text-transform: uppercase; font-size: 0.9rem; }
        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--gray-300);
            font-family: inherit;
            font-size: 1rem;
            transition: 0.3s;
        }
        .form-input:focus, .form-select:focus { border-color: var(--nau-blue); outline: none; }
        
        .time-slots { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
        .time-slot-btn {
            border: 1px solid var(--gray-300);
            background: var(--white);
            padding: 10px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .time-slot-btn:hover { border-color: var(--nau-gold); color: var(--nau-blue); }
        .time-slot-btn.selected { background: var(--nau-blue); color: var(--white); border-color: var(--nau-blue); }
        .time-slot-btn.disabled { opacity: 0.5; cursor: not-allowed; background: var(--gray-100); text-decoration: line-through; }

        .modal-footer {
            padding: 20px 30px;
            background: var(--gray-100);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .calendar-grid { display: none; } /* Hide grid on mobile, force list */
            .schedule-list { display: block; }
            .view-toggle { display: none; }
            .schedule-row { grid-template-columns: 80px 1fr; grid-template-rows: auto auto; }
            .schedule-info { grid-column: 2; grid-row: 1; padding-bottom: 0; }
            .schedule-status { grid-column: 2; grid-row: 2; padding-top: 0; padding-bottom: 10px; }
            .schedule-action { grid-column: 1 / -1; border-top: 1px solid var(--gray-200); padding: 10px; text-align: center; }
            .calendar-title { font-size: 2.5rem; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="site-header">
        <div class="container header-inner">
            <a href="Athletics_style1.html" class="brand">
                <div class="brand-text">
                    <span class="main">NAU MPCT</span>
                    <span class="sub">Lab Operations</span>
                </div>
            </a>
            <nav class="nav-links">
                <a href="Athletics_style1.html">Home</a>
                <a href="#" class="active">Billing</a>
                <a href="#">My Bookings</a>
                <a href="#">Login</a>
            </nav>
        </div>
    </header>

    <!-- Hero -->
    <section class="calendar-hero">
        <div class="container">
            <h1 class="calendar-title">Master Schedule</h1>
            <p class="calendar-subtitle">Book your time in the cleanroom, register for safety training, or attend our seminar series.</p>
        </div>
    </section>

    <!-- Filters -->
    <div class="filter-bar">
        <div class="container filter-container">
            <div class="filter-group">
                <span class="filter-label">Filter By:</span>
                <button class="filter-btn active-gold" onclick="filterEvents('all')">All Labs</button>
                <button class="filter-btn" onclick="filterEvents('training')">Training</button>
                <button class="filter-btn" onclick="filterEvents('maintenance')">Maintenance</button>
                <button class="filter-btn" onclick="filterEvents('reservation')">Equipment</button>
            </div>
            
            <div class="filter-group">
                <div class="view-toggle">
                    <button class="view-btn active" id="viewGrid" onclick="toggleView('grid')">Grid</button>
                    <button class="view-btn" id="viewList" onclick="toggleView('list')">List</button>
                </div>
                <button class="btn btn-primary" onclick="openBookingModal()">+ New Booking</button>
            </div>
        </div>
    </div>

    <!-- Calendar Content -->
    <div class="container calendar-wrapper">
        
        <!-- Controls -->
        <div class="calendar-controls">
            <button class="nav-btn" onclick="changeMonth(-1)">&#8249;</button>
            <div class="month-display" id="monthDisplay">January 2026</div>
            <button class="nav-btn" onclick="changeMonth(1)">&#8250;</button>
        </div>

        <!-- GRID VIEW -->
        <div class="calendar-grid" id="calendarGrid">
            <!-- Headers -->
            <div class="day-header">Sun</div>
            <div class="day-header">Mon</div>
            <div class="day-header">Tue</div>
            <div class="day-header">Wed</div>
            <div class="day-header">Thu</div>
            <div class="day-header">Fri</div>
            <div class="day-header">Sat</div>
            
            <!-- JS will populate days here -->
        </div>

        <!-- LIST VIEW -->
        <div class="schedule-list" id="scheduleList">
            <!-- Items injected by JS -->
        </div>
    </div>

    <!-- Booking Modal -->
    <div class="modal-overlay" id="bookingModal">
        <div class="booking-modal">
            <div class="modal-header">
                <h3 class="modal-title">Equipment Checkout</h3>
                <button class="close-modal" onclick="closeBookingModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="bookingForm" onsubmit="event.preventDefault(); submitBooking();">
                    <div class="form-group">
                        <label class="form-label">Select Equipment</label>
                        <select class="form-select">
                            <option>Mask Aligner (Karl Suss)</option>
                            <option>SEM (Zeiss Sigma)</option>
                            <option>DRIE Etcher</option>
                            <option>Sputter Coater</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-input" id="bookingDate">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Available Kick-off Times</label>
                        <div class="time-slots" id="timeSlots">
                            <div class="time-slot-btn" onclick="selectTime(this)">08:00 AM</div>
                            <div class="time-slot-btn disabled">09:00 AM</div>
                            <div class="time-slot-btn" onclick="selectTime(this)">10:00 AM</div>
                            <div class="time-slot-btn" onclick="selectTime(this)">11:00 AM</div>
                            <div class="time-slot-btn" onclick="selectTime(this)">01:00 PM</div>
                            <div class="time-slot-btn disabled">02:00 PM</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Project Code (Team Name)</label>
                        <input type="text" class="form-input" placeholder="e.g. EE490-Capstone">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" style="background:transparent; color:var(--nau-blue); border:1px solid var(--gray-300);" onclick="closeBookingModal()">Cancel</button>
                <button class="btn btn-primary" onclick="submitBooking()">Confirm Booking</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="background: var(--nau-blue); color: white; padding: 40px 0; text-align: center; margin-top: 60px;">
        <div class="container">
            <p>&copy; 2026 Northern Arizona University MPCT Lab. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Data Store (Mock Events)
        const eventsData = [
            { id: 1, title: "Intro to Lithography", date: "2026-01-12", type: "training", time: "2:00 PM", location: "Cleanroom Bay 1", status: "Open" },
            { id: 2, title: "SEM Maintenance", date: "2026-01-14", type: "maintenance", time: "All Day", location: "Metrology Lab", status: "Closed" },
            { id: 3, title: "Guest Lecture: Intel", date: "2026-01-15", type: "lecture", time: "4:00 PM", location: "Lecture Hall B", status: "Open" },
            { id: 4, title: "EE490 Lab Block", date: "2026-01-20", type: "reservation", time: "9:00 AM", location: "Packaging Lab", status: "Full" },
            { id: 5, title: "Vacuum Pump Service", date: "2026-01-22", type: "maintenance", time: "8:00 AM", location: "Chase Way", status: "Warning" },
            { id: 6, title: "Safety Cert Renewal", date: "2026-01-28", type: "training", time: "10:00 AM", location: "Online", status: "Open" },
            { id: 7, title: "Dr. Jensen Research", date: "2026-01-05", type: "reservation", time: "1:00 PM", location: "Bay 3", status: "Booked" },
        ];

        let currentDate = new Date(2026, 0, 1); // Start Jan 2026
        let currentFilter = 'all';

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderCalendar();
            renderList();
            
            // Set today's date in booking modal
            document.getElementById('bookingDate').valueAsDate = new Date();
        });

        // Toggle View
        function toggleView(view) {
            document.getElementById('calendarGrid').style.display = view === 'grid' ? 'grid' : 'none';
            document.getElementById('scheduleList').classList.toggle('active', view === 'list');
            
            document.getElementById('viewGrid').classList.toggle('active', view === 'grid');
            document.getElementById('viewList').classList.toggle('active', view === 'list');
        }

        // Render Grid
        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const monthDisplay = document.getElementById('monthDisplay');
            
            // Clear existing days (keep headers)
            const headers = grid.querySelectorAll('.day-header');
            grid.innerHTML = '';
            headers.forEach(h => grid.appendChild(h));

            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            monthDisplay.innerText = `${monthNames[month]} ${year}`;

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            // Previous Month Padding
            for(let i = 0; i < firstDay; i++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day other-month';
                grid.appendChild(dayDiv);
            }

            // Current Month
            for(let i = 1; i <= daysInMonth; i++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                
                // Construct date string YYYY-MM-DD
                const dateStr = `${year}-${String(month+1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                
                // Add Day Number
                const numDiv = document.createElement('div');
                numDiv.className = 'day-number';
                numDiv.innerText = i;
                dayDiv.appendChild(numDiv);

                // Add Events
                const daysEvents = eventsData.filter(e => e.date === dateStr && (currentFilter === 'all' || e.type === currentFilter));
                
                daysEvents.forEach(evt => {
                    const chip = document.createElement('a');
                    chip.className = `event-chip type-${evt.type}`;
                    chip.innerText = evt.title;
                    chip.onclick = () => alert(`Event Details:\n${evt.title}\nTime: ${evt.time}\nLocation: ${evt.location}`);
                    dayDiv.appendChild(chip);
                });

                grid.appendChild(dayDiv);
            }
        }

        // Render List
        function renderList() {
            const listContainer = document.getElementById('scheduleList');
            listContainer.innerHTML = '';
            
            // Sort events by date
            const sortedEvents = eventsData
                .filter(e => currentFilter === 'all' || e.type === currentFilter)
                .sort((a,b) => new Date(a.date) - new Date(b.date));

            sortedEvents.forEach(evt => {
                const dateObj = new Date(evt.date);
                const day = dateObj.getDate();
                const month = dateObj.toLocaleString('default', { month: 'short' });

                let statusClass = 'status-open';
                if(evt.status === 'Closed' || evt.status === 'Warning') statusClass = 'status-maintenance';
                if(evt.status === 'Full' || evt.status === 'Booked') statusClass = 'status-full';

                const html = `
                    <div class="schedule-row">
                        <div class="schedule-date">
                            <span class="date-num">${day}</span>
                            <span class="date-month">${month}</span>
                        </div>
                        <div class="schedule-info">
                            <div class="event-cat text-gold">${evt.type}</div>
                            <div class="event-name">${evt.title}</div>
                            <div class="event-loc">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                                ${evt.location} â€¢ ${evt.time}
                            </div>
                        </div>
                        <div class="schedule-status ${statusClass}">
                            ${evt.status}
                        </div>
                        <div class="schedule-action">
                            <button class="btn btn-outline" style="color:var(--nau-blue); border-color:var(--gray-300); padding:5px 10px; font-size:0.8rem;" onclick="openBookingModal()">Reserve</button>
                        </div>
                    </div>
                `;
                listContainer.innerHTML += html;
            });
        }

        // Filter Logic
        function filterEvents(type) {
            currentFilter = type;
            
            // Update buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active-gold');
                if(btn.innerText.toLowerCase().includes(type) || (type === 'all' && btn.innerText === 'All Labs')) {
                    btn.classList.add('active-gold');
                }
            });

            renderCalendar();
            renderList();
        }

        // Navigation Logic
        function changeMonth(dir) {
            currentDate.setMonth(currentDate.getMonth() + dir);
            renderCalendar();
        }

        // Modal Logic
        function openBookingModal() {
            document.getElementById('bookingModal').classList.add('open');
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').classList.remove('open');
        }

        function selectTime(el) {
            if(el.classList.contains('disabled')) return;
            document.querySelectorAll('.time-slot-btn').forEach(b => b.classList.remove('selected'));
            el.classList.add('selected');
        }

        function submitBooking() {
            // Mock submission
            const btn = document.querySelector('.modal-footer .btn-primary');
            const originalText = btn.innerText;
            btn.innerText = "Processing...";
            
            setTimeout(() => {
                alert("Reservation Confirmed! You're on the starting lineup.");
                closeBookingModal();
                btn.innerText = originalText;
            }, 1000);
        }

        // Close modal on outside click
        document.getElementById('bookingModal').addEventListener('click', (e) => {
            if(e.target.id === 'bookingModal') closeBookingModal();
        });
    </script>
</body>
</html>
